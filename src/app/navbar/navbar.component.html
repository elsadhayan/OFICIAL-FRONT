<!-- NAVBAR DESKTOP -->
<mat-toolbar *ngIf="mostrarNavbar" class="custom-toolbar">
  <img src="assets/HUIZTLIORIGINAAAAL.png" alt="Logotipo" class="logo" />
  <span class="spacer"></span>

  <!-- MENÚ DESKTOP -->
  <div class="navbar-links">
    <a mat-button routerLink="/home" routerLinkActive="activo-link">INICIO</a>

    <button mat-button [matMenuTriggerFor]="menuTalleres" class="boton-talleres">
      TALLERES <mat-icon>expand_more</mat-icon>
    </button>

    <a mat-button routerLink="/nosotros" routerLinkActive="activo-link">ACERCA DE NOSOTROS</a>

    <!-- INSCRIPCIONES -->
    <button mat-button [matMenuTriggerFor]="menuInscripciones" class="boton-talleres">
      INSCRIPCIONES <mat-icon>expand_more</mat-icon>
    </button>

    <!-- Mostrar SOLO si NO hay sesión -->
    <a *ngIf="!isLoggedIn()" mat-button routerLink="/registro" routerLinkActive="activo-link">CREAR CUENTA</a>
    <a *ngIf="!isLoggedIn()" mat-button routerLink="/login" routerLinkActive="activo-link">INICIAR SESIÓN</a>

    <!-- Mostrar SOLO si SÍ hay sesión -->
    <a *ngIf="isLoggedIn()" mat-button routerLink="/mis-pagos" routerLinkActive="activo-link">
      MIS PAGOS
    </a>
    <button *ngIf="isLoggedIn()" mat-raised-button color="warn" class="logout-desktop" (click)="cerrarSesion()">
      <mat-icon>logout</mat-icon> CERRAR SESIÓN
    </button>
  </div>

  <mat-icon class="icono-menu" (click)="toggleMenu()">menu</mat-icon>
</mat-toolbar>

<!-- MENÚ MOBILE -->
<div *ngIf="menuActivo && mostrarNavbar" class="mobile-menu">
  <a mat-button routerLink="/home" (click)="toggleMenu()">INICIO</a>

  <button mat-button [matMenuTriggerFor]="menuTalleres" class="boton-talleres">
    TALLERES <mat-icon>expand_more</mat-icon>
  </button>

  <button mat-button [matMenuTriggerFor]="menuInscripciones" class="boton-talleres">
    INSCRIPCIONES <mat-icon>expand_more</mat-icon>
  </button>

  <a mat-button routerLink="/nosotros" (click)="toggleMenu()">ACERCA DE NOSOTROS</a>

  <!-- Mostrar SOLO si NO hay sesión -->
  <a *ngIf="!isLoggedIn()" mat-button routerLink="/registro" (click)="toggleMenu()">CREAR CUENTA</a>
  <a *ngIf="!isLoggedIn()" mat-button routerLink="/login" (click)="toggleMenu()">INICIAR SESIÓN</a>

  <!-- Mostrar SOLO si SÍ hay sesión -->
  <a *ngIf="isLoggedIn()" mat-button routerLink="/mis-pagos" (click)="toggleMenu()">MIS PAGOS</a>
  <button *ngIf="isLoggedIn()" mat-raised-button color="warn" class="logout-mobile" (click)="cerrarSesion()">
    <mat-icon>logout</mat-icon> CERRAR SESIÓN
  </button>
</div>

<!-- ============================= -->
<!--  MENÚS COMPARTIDOS (globales) -->
<!-- ============================= -->

<!-- MENÚ TALLERES -->
<mat-menu #menuTalleres="matMenu" class="custom-menu">
  <ng-container *ngFor="let taller of talleres">
    <button mat-menu-item [routerLink]="taller.ruta" routerLinkActive="activo-link" (click)="toggleMenu()">
      <mat-icon>{{ taller.icono }}</mat-icon>
      <span>{{ taller.nombre }}</span>
    </button>
    <mat-divider></mat-divider>
  </ng-container>
</mat-menu>

<!-- MENÚ INSCRIPCIONES -->
<mat-menu #menuInscripciones="matMenu" class="custom-menu">
  <mat-divider></mat-divider>
  <button mat-menu-item routerLink="/registro/inscripciones" (click)="toggleMenu()">
    <mat-icon>event</mat-icon>
    <span>Inscripciones</span>
  </button>
  <button mat-menu-item routerLink="/registro/estatus-inscripciones" (click)="toggleMenu()">
    <mat-icon>article</mat-icon>
    <span>Estado</span>
  </button>
  <mat-divider></mat-divider>
  <button mat-menu-item [matMenuTriggerFor]="submenuReinscripciones">
    <mat-icon>loop</mat-icon>
    <span>Reinscripciones</span>
  </button>
</mat-menu>

<!-- Submenú Reinscripciones -->
<mat-menu #submenuReinscripciones="matMenu" class="custom-menu">
  <button mat-menu-item routerLink="/registro/reinscripciones" (click)="toggleMenu()">
    <mat-icon>event</mat-icon>
    <span>Reinscripcion</span>
  </button>
  <button mat-menu-item routerLink="/registro/estatus-reinscripciones" (click)="toggleMenu()">
    <mat-icon>article</mat-icon>
    <span>Estado</span>
  </button>
</mat-menu>
